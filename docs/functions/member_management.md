# メンバー管理

## 登録/削除
メンバーの登録/削除はスラッシュコマンドで行う。

### スラッシュコマンド構文
登録
```
/commandname add <登録するプレイヤー名>
/commandname add <プレイヤー名> <追加する別名>
```
削除
```
/commandname del <削除するプレイヤー名>
/commandname del <プレイヤー名> <削除する別名>
```
- プレイヤー削除時、そのプレイヤーに追加されている別名もすべて削除される。

## レギュラーメンバー（登録済みプレイヤー）
メンバーとして登録されているプレイヤーは別名（ニックネーム）を定義できる。<br />
スコア記録や成績サマリを出力する際に、別名で記載されていても登録したプレイヤー名に置き換えられる。

## ゲストメンバー（未登録プレイヤー）
メンバー登録されていないプレイヤーは、スコア記録時に入力されたプレイヤー名で記録される。<br />
名前で記録しておくことで、あとからメンバー登録しても成績を追従できる。

### ゲストからレギュラーに変更する際の注意点

別名を登録したタイミングで、データベース上で見つかった別名はすべてプレイヤー名にアップデートされる。

メンバーリストに載っている名前で新規登録はできないが、レギュラーからゲストに変更されたプレイヤーと同じ名前を使用した場合、名前はすべて置き換えられてしまう。<br />
登録、削除の順番次第ではデータが使い物にならなくなるので注意すること。

## プレイヤー名の敬称の取り扱い
「Aさん」など、敬称が付いた状態で記述されているプレイヤーの敬称は削除されて処理される。

削除対象の敬称は以下
- さん / サン
- くん / クン / 君
- ちゃん / チャン

ただし、以下の条件を満たしている場合は削除されない
- 登録されているメンバーの名前に敬称が付いている
- 敬称の直前が促音の場合
  - 「ぐっさん」や「あっくん」「ウッチャン」など

## メンバー探索順序
以下の順序で入力された名前をメンバーリストから探索し、一致した場合にレギュラーメンバーとして処理される。

1. 入力された文字列を加工せずに登録されている名前/別名と比較して一致した場合
2. 入力された文字列から敬称を削除を削除し、登録されている名前/別名と比較して一致した場合
3. 敬称の削除後、カタカナ部分をひらがなに変換し、登録されている名前/別名と比較して一致した場合
4. 敬称の削除後、ひらがな部分をカタカナに変換し、登録されている名前/別名と比較して一致した場合
